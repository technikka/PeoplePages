<div class="post-container">
  <%= render partial: 'posts/content', locals: { post: post } %>

  <%= turbo_frame_tag "like_#{post.id}" do %>
    <% if post.likes.any? { |like| like.user_id == current_user.id } %>
      <%= render partial: 'likes/unlike', locals: {resource: post } %>
    <% else %>
      <%= render partial: 'likes/like', locals: { resource: post } %>
    <% end %>
  <% end %>

  <%= turbo_frame_tag "post_#{post.id}" do %>
    <%= render 'comments/preview', post: post %>
  <% end %>

  <% @num_comments = post.comments.size %>
  <% if @num_comments > 3 %>
    <span><%= post.comments.size - 3 %> more comments. </span>
  <% end %>

  <% if @author == current_user %>
    <span><%= link_to "View/Edit Post", post_path(post.id)%></span>
  <% else %>
    <span><%= link_to "View Post", post_path(post.id)%></span>
  <% end %>

  <%= render partial: 'comments/form', locals: { post: post} %>
</div>
